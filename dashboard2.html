<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Owner's Executive Dashboard</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Configure the Inter font */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        html { font-family: 'Inter', sans-serif; }
        
        /* Custom scrollbar styling for aesthetics */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; } /* Slate 400 */
        .dark ::-webkit-scrollbar-thumb { background: #334155; } /* Slate 700 */

        /* Subtle transition for all elements */
        * {
            transition: background-color 0.2s, color 0.2s, border-color 0.2s, box-shadow 0.2s;
        }

        /* Card hover effect for engagement */
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .dark .card-hover:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
        }
        .active-link {
            background-color: #0e7490; /* brand color */
            color: white;
            box-shadow: 0 4px 6px -1px rgba(14, 116, 144, 0.3);
        }
    </style>
    <script>
        // Updated Tailwind Configuration for a fresh, vibrant look
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        // Trustworthy, professional primary color (Teal)
                        brand: '#0e7490', /* Teal 700 */
                        // High-contrast accent color for visibility (Amber)
                        secondary: '#facc15', /* Amber 500 */
                        // Backgrounds
                        lightBg: '#f1f5f9', /* Slate 100 */
                        darkBg: '#0f172a', /* Slate 900 */
                        cardBgLight: '#ffffff',
                        cardBgDark: '#1e293b', /* Slate 800 */
                    },
                    borderRadius: {
                        '3xl': '1.75rem', // More pronounced rounding
                    }
                }
            }
        }

        // --- Mock Data for Business Owner View ---
        const businessData = {
            // ENHANCED KPIs for better owner insights
            criticalKpis: [
                { title: "Gross Revenue (L30D)", value: "₹ 48,45,000", comparison: "vs Target: ₹ 50L", trend: "-3.1%", status: "down", color: "red", icon: "revenue" },
                { title: "Peak Hour Utilization", value: "92%", comparison: "vs Last Month: 88%", trend: "+4.0%", status: "up", color: "green", icon: "utilization" },
                { title: "Avg. Booking Value (ABV)", value: "₹ 1,250", comparison: "vs Last Month: ₹ 1,180", trend: "+5.9%", status: "up", color: "brand", icon: "value" },
                { title: "New Customer Acquisition", value: "542", comparison: "vs Last Month: 480", trend: "+12.8%", status: "up", color: "secondary", icon: "customers" },
            ],
            financialBreakdown: [
                { name: "Total Revenue", amount: "₹ 48,45,000", percentage: 100, color: "brand" },
                { name: "Cost of Goods/Service", amount: "₹ 18,20,000", percentage: 37, color: "red" },
                { name: "Operating Expenses", amount: "₹ 14,75,000", percentage: 30, color: "yellow" },
            ],
            alerts: [
                { message: "Ace Badminton Court #2 requires AC servicing by next week.", type: "warning" },
                { message: "Three invoices over 45 days past due. Total: ₹ 1,12,000. Follow up urgently.", type: "danger" },
                { message: "High demand detected: Weekend pricing increase recommended for Football Turf.", type: "recommendation" },
            ],
            venuePerformance: [
                { name: "Football Turf (5v5)", revenue: "₹ 20L", rating: "4.7 ★", occupancy: 92, status: "Excellent" },
                { name: "Badminton Courts", revenue: "₹ 18L", rating: "4.9 ★", occupancy: 88, status: "Excellent" },
                { name: "Cricket Nets (3 lanes)", revenue: "₹ 10L", rating: "4.1 ★", occupancy: 65, status: "Needs Review" },
            ]
        };
        // --- End Mock Data ---


        // Utility to get color classes
        function getColorClasses(type, isBackground = false) {
            if (type === 'up') return { text: 'text-green-600', bg: 'bg-green-100', icon: 'M13 7l5 5m0 0l-5 5m5-5H6' };
            if (type === 'down') return { text: 'text-red-600', bg: 'bg-red-100', icon: 'M13 17l5-5m0 0l-5-5m5 5H6' };
            if (type === 'warning') return { text: 'text-yellow-600', bg: 'bg-yellow-100 dark:bg-yellow-900/50', border: 'border-yellow-500' };
            if (type === 'danger') return { text: 'text-red-600', bg: 'bg-red-100 dark:bg-red-900/50', border: 'border-red-500' };
            if (type === 'recommendation') return { text: 'text-brand', bg: 'bg-brand/10 dark:bg-brand/30', border: 'border-brand' };
            
            // For revenue breakdown
            if (type === 'brand') return isBackground ? 'bg-brand' : 'text-brand';
            if (type === 'red') return isBackground ? 'bg-red-500' : 'text-red-500';
            if (type === 'yellow') return isBackground ? 'bg-yellow-500' : 'text-yellow-500';

            return { text: 'text-gray-500', bg: 'bg-gray-100' };
        }

        // Function to get the appropriate SVG icon for the KPI card
        function getKpiIcon(iconName, colorClass) {
            let svgContent = '';
            switch (iconName) {
                case 'revenue':
                    svgContent = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m0 0l-1 1m-1-1h4m-4 0v-4"></path>`;
                    break;
                case 'utilization':
                    svgContent = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>`;
                    break;
                case 'value':
                    svgContent = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 8h6m-5 0v5m-5-5v8a2 2 0 002 2h4.586a1 1 0 00.707-.293l4.414-4.414a1 1 0 00-.707-1.707H15m0 0l-4 4m-4-4l-4 4"></path>`;
                    break;
                case 'customers':
                    svgContent = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h-3l-1.5-3H9.5L8 20H5M12 14a4 4 0 100-8 4 4 0 000 8z"></path>`;
                    break;
                default:
                    svgContent = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>`;
            }

            return `
                <div class="p-3 rounded-full ${colorClass} bg-opacity-20 dark:bg-opacity-30">
                    <svg class="w-6 h-6 ${colorClass}" fill="none" stroke="currentColor" viewBox="0 0 24 24">${svgContent}</svg>
                </div>
            `;
        }

        // Dark Mode Toggle
        function toggleDarkMode() {
            const html = document.documentElement;
            html.classList.toggle('dark');
            localStorage.setItem('theme', html.classList.contains('dark') ? 'dark' : 'light');
            updateToggleIcon(html.classList.contains('dark'));
        }

        function updateToggleIcon(isDark) {
             const iconContainer = document.getElementById('dark-mode-icon');
             if (iconContainer) {
                iconContainer.innerHTML = isDark 
                    ? '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>'
                    : '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>';
             }
        }

        // Initial theme setup
        document.addEventListener('DOMContentLoaded', () => {
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const savedTheme = localStorage.getItem('theme');
            const isDark = savedTheme === 'dark' || (!savedTheme && prefersDark);
            
            if (isDark) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
            updateToggleIcon(isDark);
        });
        
        // --- SIDEBAR NAVIGATION (Mocking HTMX behavior for local viewing) ---
        let currentPage = 'Dashboard Overview';

        function setActiveLink(linkName) {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active-link', 'text-white', 'font-semibold', 'shadow-md', 'dark:bg-brand');
                link.classList.add('text-gray-600', 'dark:text-gray-300', 'hover:bg-gray-100', 'dark:hover:bg-slate-700');
            });
            const activeLink = document.getElementById(`nav-${linkName.replace(/\s/g, '-')}`);
            if (activeLink) {
                activeLink.classList.remove('text-gray-600', 'dark:text-gray-300', 'hover:bg-gray-100', 'dark:hover:bg-slate-700');
                activeLink.classList.add('active-link', 'text-white', 'font-semibold', 'shadow-md', 'dark:bg-brand');
            }
            currentPage = linkName;
        }

        // --- CONTENT RENDERING FUNCTIONS ---

        // The main dashboard content (rendered on load)
        function getDashboardContent() {
            // This entire content block is the home screen, optimized for owner insights
            return `
                <h2 class="text-3xl font-bold text-gray-900 dark:text-gray-50 mb-6">Executive Command Center</h2>
                
                <!-- Section: Financial & Operational Health -->
                <h3 class="text-xl font-semibold text-gray-700 dark:text-gray-300 mb-4 border-b pb-2">Key Business Health Indicators</h3>
                <div id="critical-kpis" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">
                    <!-- KPI Cards will be injected by JavaScript -->
                </div>

                <!-- Section: Action Required / Alerts -->
                <h3 class="text-xl font-semibold text-red-600 dark:text-red-400 mb-4 border-b pb-2">Action Required (Urgent & Recommendations)</h3>
                <div id="action-alerts" class="mb-10">
                    <!-- Alerts will be injected by JavaScript -->
                </div>

                <!-- Section: Performance Breakdown -->
                <h3 class="text-xl font-semibold text-gray-700 dark:text-gray-300 mb-4 border-b pb-2">Operational Insights</h3>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    
                    <!-- Column 1: Financial Breakdown (Profitability Focus) -->
                    <div class="lg:col-span-1 p-6 bg-cardBgLight dark:bg-cardBgDark rounded-3xl shadow-xl card-hover">
                        <h4 class="text-xl font-bold text-gray-900 dark:text-gray-50 mb-5 border-b pb-3 dark:border-slate-700">Profitability Breakdown (L30D)</h4>
                        <div id="financial-breakdown">
                            <!-- Financial Bars will be injected by JavaScript -->
                        </div>
                        <p class="text-sm font-semibold text-gray-700 dark:text-gray-300 mt-4 pt-4 border-t border-gray-100 dark:border-slate-700">
                            Net Profit: <span class="text-green-600 dark:text-green-400">₹ 15,50,000</span>
                        </p>
                    </div>

                    <!-- Column 2: Venue Performance -->
                    <div class="lg:col-span-2 p-6 bg-cardBgLight dark:bg-cardBgDark rounded-3xl shadow-xl card-hover">
                        <h4 class="text-xl font-bold text-gray-900 dark:text-gray-50 mb-5 border-b pb-3 dark:border-slate-700">Venue Performance Snapshot</h4>
                        <div id="venue-performance" class="grid grid-cols-1 md:grid-cols-3 gap-5">
                            <!-- Venue Performance Cards will be injected by JavaScript -->
                        </div>
                    </div>
                </div>
            `;
        }

        // Content for other tabs (simplified mock for navigation demo)
        function getVenuesContent() {
            return `
                <h2 class="text-3xl font-bold text-brand mb-6">Venue Management</h2>
                <p class="text-lg text-gray-600 dark:text-gray-400 mb-8">View all active facilities, check detailed schedules, and manage pricing slabs.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    ${businessData.venuePerformance.map(v => `
                        <div class="p-6 bg-white dark:bg-slate-700 rounded-2xl shadow-lg border-t-4 border-brand">
                            <h4 class="text-2xl font-bold text-gray-900 dark:text-white">${v.name}</h4>
                            <p class="text-gray-500 dark:text-gray-400 mt-2">Revenue: ${v.revenue} | Rating: ${v.rating}</p>
                            <button class="mt-4 bg-brand text-white text-sm px-4 py-2 rounded-lg hover:bg-brand/80 transition-colors">Manage Schedule</button>
                        </div>
                    `).join('')}
                    <div class="p-6 border-2 border-dashed border-gray-300 dark:border-slate-600 rounded-2xl flex items-center justify-center text-center">
                        <button class="text-brand font-semibold hover:text-brand/80">+ Add New Facility</button>
                    </div>
                </div>
            `;
        }
        
        function getBookingsContent() {
            return `
                <h2 class="text-3xl font-bold text-brand mb-6">Live Bookings & Check-ins</h2>
                <p class="text-lg text-gray-600 dark:text-gray-400 mb-8">Monitor today's schedule and perform quick check-ins.</p>
                <div class="bg-white dark:bg-slate-700 rounded-2xl shadow-xl overflow-hidden">
                    <table class="min-w-full divide-y divide-gray-200 dark:divide-slate-600">
                        <thead class="bg-gray-50 dark:bg-slate-600">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Time Slot</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Facility</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Customer</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Status</th>
                                <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Action</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200 dark:divide-slate-600">
                            <tr class="hover:bg-gray-50 dark:hover:bg-slate-700/50">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">5:00 PM - 6:00 PM</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Football Turf (5v5)</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Rohan Sharma</td>
                                <td class="px-6 py-4 whitespace-nowrap"><span class="px-3 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Pending</span></td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                    <button onclick="checkIn(this, 'Rohan Sharma')" class="bg-brand text-white px-3 py-1.5 rounded-lg text-xs font-semibold hover:bg-brand/80 transition-colors">Check In</button>
                                </td>
                            </tr>
                            <tr class="hover:bg-gray-50 dark:hover:bg-slate-700/50">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">6:00 PM - 7:00 PM</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Badminton Court #1</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Priya Singh</td>
                                <td class="px-6 py-4 whitespace-nowrap"><span class="px-3 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Paid</span></td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                    <button onclick="checkIn(this, 'Priya Singh')" class="bg-gray-300 text-gray-700 px-3 py-1.5 rounded-lg text-xs font-semibold cursor-not-allowed" disabled>Checked In</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            `;
        }

        function getPayoutsContent() {
            return `
                <h2 class="text-3xl font-bold text-brand mb-6">Financial Summary & Payouts</h2>
                <p class="text-lg text-gray-600 dark:text-gray-400 mb-8">Track all earnings, fees, and disbursement status.</p>
                
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-8">
                    <div class="p-6 bg-white dark:bg-slate-700 rounded-2xl shadow-lg border-l-4 border-green-500">
                        <p class="text-sm text-gray-500 dark:text-gray-400">Total Payouts YTD</p>
                        <p class="text-4xl font-bold text-gray-900 dark:text-white mt-1">₹ 98,40,000</p>
                    </div>
                    <div class="p-6 bg-white dark:bg-slate-700 rounded-2xl shadow-lg border-l-4 border-yellow-500">
                        <p class="text-sm text-gray-500 dark:text-gray-400">Pending Disbursement</p>
                        <p class="text-4xl font-bold text-gray-900 dark:text-white mt-1">₹ 2,15,500</p>
                    </div>
                </div>

                <h3 class="text-xl font-semibold text-gray-700 dark:text-gray-300 mb-4 border-b pb-2">Recent Payout History</h3>
                <!-- Payout Table -->
                <div class="bg-white dark:bg-slate-700 rounded-2xl shadow-xl overflow-hidden">
                    <table class="min-w-full divide-y divide-gray-200 dark:divide-slate-600">
                        <thead class="bg-gray-50 dark:bg-slate-600">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Date</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Amount</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Status</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Reference</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200 dark:divide-slate-600">
                            <tr class="hover:bg-gray-50 dark:hover:bg-slate-700/50">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">Sep 25, 2024</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-green-600 font-semibold">₹ 1,50,000</td>
                                <td class="px-6 py-4 whitespace-nowrap"><span class="px-3 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Completed</span></td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">TXN-4598</td>
                            </tr>
                            <tr class="hover:bg-gray-50 dark:hover:bg-slate-700/50">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">Sep 18, 2024</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-green-600 font-semibold">₹ 1,45,200</td>
                                <td class="px-6 py-4 whitespace-nowrap"><span class="px-3 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Completed</span></td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">TXN-4592</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            `;
        }

        function getAvailabilityContent() {
            return `
                <h2 class="text-3xl font-bold text-brand mb-6">Pricing & Availability Rules</h2>
                <p class="text-lg text-gray-600 dark:text-gray-400 mb-8">Manage pricing slabs, block holidays, and adjust availability.</p>
                
                <h3 class="text-xl font-semibold text-gray-700 dark:text-gray-300 mb-4 border-b pb-2">Active Pricing Slabs</h3>
                <!-- Pricing Slabs Table -->
                <div class="bg-white dark:bg-slate-700 rounded-2xl shadow-xl overflow-hidden mb-8">
                    <table class="min-w-full divide-y divide-gray-200 dark:divide-slate-600">
                        <thead class="bg-gray-50 dark:bg-slate-600">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Slab Name</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Applicable Days</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Time Slot</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Price/Hour</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200 dark:divide-slate-600">
                            <tr class="hover:bg-gray-50 dark:hover:bg-slate-700/50">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">Peak Hours Premium</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Mon - Fri</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">6 PM - 10 PM</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-red-600 font-semibold">₹ 1,500</td>
                            </tr>
                            <tr class="hover:bg-gray-50 dark:hover:bg-slate-700/50">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">Weekend Standard</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Sat - Sun</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">8 AM - 10 PM</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-red-600 font-semibold">₹ 1,800</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3 class="text-xl font-semibold text-gray-700 dark:text-gray-300 mb-4 border-b pb-2">Manual Blocks</h3>
                <div class="p-6 bg-white dark:bg-slate-700 rounded-2xl shadow-lg border-l-4 border-yellow-500">
                    <p class="text-sm text-gray-700 dark:text-gray-300 font-medium">Maintenance Block:</p>
                    <p class="text-md text-gray-900 dark:text-white">Football Turf (All Day) - Oct 5, 2024 (Annual cleaning)</p>
                    <button class="mt-3 bg-red-500 text-white text-sm px-4 py-2 rounded-lg hover:bg-red-600 transition-colors">Remove Block</button>
                </div>
            `;
        }

        function getPromotionsContent() {
            return `
                <h2 class="text-3xl font-bold text-brand mb-6">Promotions & Marketing</h2>
                <p class="text-lg text-gray-600 dark:text-gray-400 mb-8">Manage coupon codes, view campaign performance, and set up seasonal offers.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="p-6 bg-white dark:bg-slate-700 rounded-2xl shadow-lg border-l-4 border-accent">
                        <p class="text-sm text-gray-500 dark:text-gray-400">Campaign ROI (Last 30 Days)</p>
                        <p class="text-4xl font-bold text-gray-900 dark:text-white mt-1">210%</p>
                    </div>
                    <div class="p-6 bg-white dark:bg-slate-700 rounded-2xl shadow-lg border-l-4 border-accent">
                        <p class="text-sm text-gray-500 dark:text-gray-400">Active Coupon Codes</p>
                        <p class="text-4xl font-bold text-gray-900 dark:text-white mt-1">6</p>
                    </div>
                </div>
                <button class="mt-6 bg-secondary text-gray-900 font-bold py-2.5 px-6 rounded-xl shadow-md hover:bg-secondary/80 transition-colors">Create New Coupon</button>
            `;
        }

        function loadContent(linkName) {
            const contentDiv = document.getElementById('main-content');
            setActiveLink(linkName);

            let contentHTML = '';
            switch (linkName) {
                case 'Dashboard Overview':
                    contentHTML = getDashboardContent();
                    break;
                case 'Venues':
                    contentHTML = getVenuesContent();
                    break;
                case 'Bookings':
                    contentHTML = getBookingsContent();
                    break;
                case 'Payouts':
                    contentHTML = getPayoutsContent();
                    break;
                case 'Availability':
                    contentHTML = getAvailabilityContent();
                    break;
                case 'Promotions':
                    contentHTML = getPromotionsContent();
                    break;
                default:
                    contentHTML = `<h2 class="text-3xl font-bold">404: Page Not Found</h2>`;
            }

            contentDiv.innerHTML = contentHTML;
            
            // Re-render dashboard specific elements if on the dashboard page
            if (linkName === 'Dashboard Overview') {
                renderDashboardMetrics();
            }
        }

        // Function to render the main dashboard metrics (called after injecting dashboard HTML)
        function renderDashboardMetrics() {
            // 1. Render Critical KPIs
            const kpiHtml = businessData.criticalKpis.map(kpi => {
                const trendInfo = getColorClasses(kpi.status);
                const trendColor = kpi.status === 'up' ? 'text-green-600' : 'text-red-600';
                
                let iconColorClass;
                switch (kpi.color) {
                    case 'brand': iconColorClass = 'text-brand'; break;
                    case 'secondary': iconColorClass = 'text-secondary'; break;
                    case 'green': iconColorClass = 'text-green-500'; break;
                    case 'red': iconColorClass = 'text-red-500'; break;
                    default: iconColorClass = 'text-gray-500';
                }


                return `
                    <div class="card-hover p-6 bg-cardBgLight dark:bg-cardBgDark rounded-3xl shadow-lg border-b-4 border-${kpi.color === 'brand' ? 'brand' : kpi.color}-500">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="text-md font-medium text-gray-500 dark:text-gray-400">${kpi.title}</h3>
                                <p class="text-4xl font-extrabold text-gray-900 dark:text-gray-50 mt-1">${kpi.value}</p>
                            </div>
                            ${getKpiIcon(kpi.icon, iconColorClass)}
                        </div>
                        
                        <div class="mt-4 flex items-center justify-between pt-2 border-t border-gray-100 dark:border-slate-700">
                            <span class="text-sm font-semibold px-3 py-0.5 rounded-full ${trendColor} ${trendInfo.bg} dark:bg-opacity-30">
                                ${kpi.trend} ${kpi.status === 'up' ? '↑' : '↓'}
                            </span>
                            <span class="ml-2 text-sm text-gray-500 dark:text-gray-400 font-medium">${kpi.comparison}</span>
                        </div>
                    </div>
                `;
            }).join('');
            document.getElementById('critical-kpis').innerHTML = kpiHtml;

            // 2. Render Financial Breakdown 
            const breakdownHtml = businessData.financialBreakdown.map(item => {
                const colorClass = getColorClasses(item.color, true);
                const textColorClass = getColorClasses(item.color);
                
                return `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">${item.name}</span>
                            <span class="text-sm font-bold ${textColorClass}">${item.amount} (${item.percentage}%)</span>
                        </div>
                        <div class="w-full bg-gray-200 dark:bg-slate-700 rounded-full h-2.5">
                            <div class="${colorClass} h-2.5 rounded-full" style="width: ${item.percentage}%"></div>
                        </div>
                    </div>
                `;
            }).join('');
            document.getElementById('financial-breakdown').innerHTML = breakdownHtml;


            // 3. Render Actionable Alerts
            const alertsHtml = businessData.alerts.map(alert => {
                const { text, bg, border } = getColorClasses(alert.type);
                const icon = alert.type === 'danger' ? '🚨' : alert.type === 'warning' ? '⚠️' : '💡';
                
                return `
                    <div class="flex items-start p-4 ${bg} dark:border-slate-700 rounded-xl border-l-4 ${border} mb-3 transition-shadow hover:shadow-md">
                        <div class="flex-shrink-0 text-lg mr-3 mt-0.5">${icon}</div>
                        <div>
                            <p class="text-sm font-bold ${text}">
                                ${alert.type.toUpperCase()}
                            </p>
                            <p class="text-sm text-gray-700 dark:text-gray-300">
                                ${alert.message}
                            </p>
                        </div>
                    </div>
                `;
            }).join('');
            document.getElementById('action-alerts').innerHTML = alertsHtml;

            // 4. Render Venue Performance
            const performanceHtml = businessData.venuePerformance.map(venue => {
                const occupancyColor = venue.occupancy >= 90 ? 'bg-green-500' : venue.occupancy >= 70 ? 'bg-brand' : 'bg-red-500';
                const statusColor = venue.status === 'Excellent' ? 'text-green-600' : 'text-red-600';
                
                return `
                    <div class="bg-cardBgLight dark:bg-cardBgDark p-5 rounded-2xl border border-gray-100 dark:border-slate-700 shadow-sm">
                        <h4 class="text-xl font-bold text-gray-900 dark:text-gray-50">${venue.name}</h4>
                        <div class="mt-3 space-y-2">
                            <p class="text-sm text-gray-600 dark:text-gray-400">Revenue: <span class="font-bold text-brand">${venue.revenue}</span></p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Rating: <span class="font-bold text-secondary">${venue.rating}</span></p>
                            
                            <div class="pt-2">
                                <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1">Occupancy (${venue.occupancy}%)</p>
                                <div class="w-full bg-gray-200 dark:bg-slate-700 rounded-full h-2">
                                    <div class="${occupancyColor} h-2 rounded-full" style="width: ${venue.occupancy}%"></div>
                                </div>
                            </div>
                            
                            <p class="text-sm font-bold pt-1 ${statusColor}">Status: ${venue.status}</p>
                        </div>
                    </div>
                `;
            }).join('');
            document.getElementById('venue-performance').innerHTML = performanceHtml;
        }

        // Check-in action simulation
        function checkIn(button, customerName) {
            // Find the status message container
            const statusMessage = document.getElementById('status-message');
            
            // Update button state (simulating successful check-in)
            button.disabled = true;
            button.textContent = 'Checked In';
            button.classList.remove('bg-brand', 'hover:bg-brand/80');
            button.classList.add('bg-gray-300', 'text-gray-700', 'cursor-not-allowed');

            // Find the status cell and update it
            const statusCell = button.closest('tr').querySelector('span');
            statusCell.textContent = 'Checked In';
            statusCell.classList.remove('bg-yellow-100', 'text-yellow-800');
            statusCell.classList.add('bg-green-100', 'text-green-800');


            // Show the success message
            statusMessage.textContent = `✅ Successfully checked in ${customerName}.`;
            statusMessage.classList.remove('hidden', 'text-red-600', 'bg-red-500/10');
            statusMessage.classList.add('text-green-600', 'bg-green-500/10', 'opacity-100');
            
            // Hide the message after 4 seconds
            setTimeout(() => {
                statusMessage.classList.remove('opacity-100');
                statusMessage.classList.add('opacity-0');
            }, 4000);
            setTimeout(() => {
                statusMessage.classList.add('hidden');
            }, 4500);
        }

        // Initialize the dashboard on load
        window.onload = () => {
            loadContent('Dashboard Overview');
        };
    </script>
</head>
<body class="bg-lightBg dark:bg-darkBg text-gray-800 dark:text-gray-200 min-h-screen">
    <div class="flex flex-col lg:flex-row min-h-screen">
        
        <!-- Sidebar Navigation (Fixed Width on Desktop, Responsive) -->
        <aside class="w-full lg:w-64 bg-white dark:bg-cardBgDark lg:h-screen lg:sticky top-0 shadow-xl lg:shadow-none p-5 lg:p-6 flex flex-col">
            <h2 class="text-2xl font-bold text-brand dark:text-white mb-8 hidden lg:block">Biz Panel</h2>

            <nav class="flex lg:flex-col space-x-2 lg:space-x-0 lg:space-y-4 overflow-x-auto pb-2 lg:pb-0">
                <button id="nav-Dashboard-Overview" onclick="loadContent('Dashboard Overview')" class="nav-link flex items-center space-x-3 p-3 rounded-xl transition-colors duration-200 text-sm active-link">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
                    <span class="whitespace-nowrap">Dashboard Overview</span>
                </button>
                
                <button id="nav-Venues" onclick="loadContent('Venues')" class="nav-link flex items-center space-x-3 p-3 rounded-xl transition-colors duration-200 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m0 0h14"></path></svg>
                    <span class="whitespace-nowrap">Venues</span>
                </button>

                <button id="nav-Availability" onclick="loadContent('Availability')" class="nav-link flex items-center space-x-3 p-3 rounded-xl transition-colors duration-200 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-4 4V3m-7 8h14M3 15h18M3 21h18M12 11v10"></path></svg>
                    <span class="whitespace-nowrap">Availability & Pricing</span>
                </button>

                <button id="nav-Bookings" onclick="loadContent('Bookings')" class="nav-link flex items-center space-x-3 p-3 rounded-xl transition-colors duration-200 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <span class="whitespace-nowrap">Bookings & Check-ins</span>
                </button>

                <button id="nav-Payouts" onclick="loadContent('Payouts')" class="nav-link flex items-center space-x-3 p-3 rounded-xl transition-colors duration-200 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m0 0l-1 1m-1-1h4m-4 0v-4"></path></svg>
                    <span class="whitespace-nowrap">Payouts</span>
                </button>

                <button id="nav-Promotions" onclick="loadContent('Promotions')" class="nav-link flex items-center space-x-3 p-3 rounded-xl transition-colors duration-200 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c1.657 0 3 .895 3 2s-1.343 2-3 2-3 .895-3 2 1.343 2 3 2V8z"></path></svg>
                    <span class="whitespace-nowrap">Promotions</span>
                </button>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="flex-1 p-4 sm:p-8 lg:p-10">
            <!-- Header (for mobile and desktop) -->
            <header class="bg-lightBg dark:bg-darkBg rounded-3xl shadow-lg mb-8">
                <div class="max-w-full mx-auto py-4 px-4 sm:px-6 lg:px-8 flex flex-wrap justify-between items-center">
                    <h1 class="text-2xl font-bold text-gray-900 dark:text-gray-100">Dombivli Turfs Management</h1>
                    <div class="flex items-center space-x-4 mt-2 sm:mt-0">
                        <!-- Simulation feedback message -->
                        <div id="status-message" class="hidden opacity-0 text-sm font-bold text-green-600 bg-green-500/10 p-2 rounded-lg transition-opacity duration-500"></div>

                        <button class="bg-secondary hover:bg-secondary/90 text-gray-900 font-bold py-2.5 px-6 rounded-xl shadow-md transition-colors duration-200">
                            + New Booking
                        </button>
                        
                        <button onclick="toggleDarkMode()" class="p-2 rounded-full text-brand dark:text-secondary bg-gray-100 dark:bg-slate-700 shadow-sm hover:ring-2 ring-brand/50 transition-all">
                             <span id="dark-mode-icon"></span>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Dynamic Content Container -->
            <div id="main-content" class="max-w-full">
                <!-- Content will be loaded here by JavaScript -->
            </div>
        </main>
    </div>
</body>
</html>
